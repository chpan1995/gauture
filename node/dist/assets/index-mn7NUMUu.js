import{g as P}from"./index-BglKwrYI.js";import{t as y}from"./index-B-EWubiB.js";import{d as G,r as v,x as H,c as s,b as a,e as o,w as r,f as i,F as u,m as _,n as N,i as A,k as h,t as x,C as b,o as l}from"./index-C7oGZG6Y.js";import"./request-Bboo2TiE.js";const K={style:{display:"flex","align-items":"center",gap:"10px","margin-bottom":"24px"}},Q={key:0},W={style:{display:"flex","align-items":"center",gap:"15px","margin-bottom":"24px"}},X={class:"first_value_span"},Y={class:"first_tags_value"},Z={class:"second_tags_value"},ee={key:1,class:"divider"},te={class:"dia",style:{height:"630px",overflow:"auto"}},ae={style:{display:"flex","justify-content":"flex-end","margin-top":"10px","margin-right":"10px","margin-bottom":"30px"}},le={key:0},se={style:{display:"flex","align-items":"center",gap:"15px","margin-bottom":"24px"}},ne={class:"first_value_span"},oe={class:"first_tags_value"},re={class:"second_tags_value"},ie={key:1,class:"divider"},ue={style:{display:"flex","justify-content":"flex-end","margin-top":"10px","margin-right":"10px"}},fe=G({__name:"index",setup(pe){const p=v(),w=v(!1),k=v(""),c=v(),F=v(),f=v(),T=v([]),j=n=>{const e=n.target.files[0];if(!e)return;const d=new FileReader;d.onload=C=>{k.value=C.target.result},d.readAsText(e)},R=()=>{try{let n=JSON.parse(k.value);Array.isArray(n)?c.value=n:b.alert("内容输入有误",{confirmButtonText:"确定"})}catch{b.alert("内容输入有误",{confirmButtonText:"确定"})}},U=()=>{c.value=[],k.value="",F.value.value=""};H(async()=>{let n=await P.reqTypeInfo();if(n.code===200){n.data.forEach(d=>{T.value.push({value:d.id,label:d.name})}),T.value.length>0&&(p.value=T.value[0].value);let e=await y.reqTagsInfo({typeid:p.value,deep:2});f.value=e.data}});const z=async()=>{let n=await y.reqTagsInfo({typeid:p.value,deep:2});f.value=n.data},D=async n=>{let e=await y.reqDeleteTags({id:n});if(e.code!==200){b.alert("删除标签出错",{confirmButtonText:"确定"});return}e=await y.reqTagsInfo({typeid:p.value,deep:2}),f.value=e.data},E=async()=>{let n=await y.reqAddTags({chrildobj:JSON.stringify(c.value),deep:2,typeid:p.value});if(n.code!==200){b.alert("保存标签出错",{confirmButtonText:"确定"});return}n=await y.reqTagsInfo({typeid:p.value,deep:2}),f.value=n.data,w.value=!1};return(n,e)=>{const d=i("el-option"),C=i("el-select"),V=i("el-button"),J=i("Remove"),S=i("el-icon"),$=i("el-popconfirm"),M=i("el-card"),O=i("el-input"),L=i("el-dialog");return l(),s("div",null,[a("div",K,[e[5]||(e[5]=a("p",null,"种类：",-1)),o(C,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=t=>p.value=t),onChange:z,size:"large",style:{width:"240px"}},{default:r(()=>[(l(!0),s(u,null,_(T.value,t=>(l(),N(d,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(V,{type:"primary",onClick:e[1]||(e[1]=t=>w.value=!0)},{default:r(()=>e[4]||(e[4]=[A(" 新增配置 ")])),_:1})]),o(M,null,{default:r(()=>[(l(!0),s(u,null,_(f.value,(t,g)=>(l(),s(u,{key:g},[t.items?(l(),s("div",Q,[a("div",W,[e[6]||(e[6]=a("span",{class:"first_type_span"}," 一级分类 ",-1)),a("span",X,x(t.value),1),o($,{title:`你确定要删除${t.value}分类?`,width:"260px",onConfirm:m=>D(t.id)},{reference:r(()=>[o(V,{style:{width:"24px",height:"24px",border:"none","margin-left":"-6px"},circle:""},{default:r(()=>[o(S,{size:24,color:"#FF0000"},{default:r(()=>[o(J)]),_:1})]),_:1})]),_:2},1032,["title","onConfirm"])]),(l(!0),s(u,null,_(t.items,(m,B)=>(l(),s("div",{class:"first_tags",key:B},[e[8]||(e[8]=a("span",{class:"first_tags_span"}," 一级标签 ",-1)),a("span",Y,x(m.value),1),(l(!0),s(u,null,_(m.items,(q,I)=>(l(),s("div",{class:"second_tag",key:I},[e[7]||(e[7]=a("span",{class:"second_tags_span"}," 二级标签 ",-1)),a("span",Z,x(q.value),1)]))),128))]))),128))])):h("",!0),g!==f.value.length-1?(l(),s("hr",ee)):h("",!0)],64))),128))]),_:1}),o(L,{modelValue:w.value,"onUpdate:modelValue":e[3]||(e[3]=t=>w.value=t),title:"新增配置",width:"904",style:{height:"700px"},onClose:U},{default:r(()=>[a("div",te,[a("input",{type:"file",ref_key:"fileInputRef",ref:F,onChange:j,accept:".json"},null,544),o(O,{modelValue:k.value,"onUpdate:modelValue":e[2]||(e[2]=t=>k.value=t),style:{width:"100%","margin-top":"10px","margin-bottom":"10px"},rows:2,type:"textarea",placeholder:"Please input",resize:"none"},null,8,["modelValue"]),a("div",ae,[o(V,{type:"primary",onClick:R},{default:r(()=>e[9]||(e[9]=[A("解析")])),_:1})]),(l(!0),s(u,null,_(c.value,(t,g)=>(l(),s(u,{key:g},[t.items?(l(),s("div",le,[a("div",se,[e[10]||(e[10]=a("span",{class:"first_type_span"}," 一级分类 ",-1)),a("span",ne,x(t.value),1)]),(l(!0),s(u,null,_(t.items,(m,B)=>(l(),s("div",{class:"first_tags",key:B},[e[12]||(e[12]=a("span",{class:"first_tags_span"}," 一级标签 ",-1)),a("span",oe,x(m.value),1),(l(!0),s(u,null,_(m.items,(q,I)=>(l(),s("div",{class:"second_tag",key:I},[e[11]||(e[11]=a("span",{class:"second_tags_span"}," 二级标签 ",-1)),a("span",re,x(q.value),1)]))),128))]))),128))])):h("",!0),g!==c.value.length-1?(l(),s("hr",ie)):h("",!0),a("div",ue,[g===c.value.length-1&&t.value?(l(),N(V,{key:0,type:"primary",onClick:E},{default:r(()=>e[13]||(e[13]=[A(" 保存 ")])),_:1})):h("",!0)])],64))),128))])]),_:1},8,["modelValue"])])}}});export{fe as default};
